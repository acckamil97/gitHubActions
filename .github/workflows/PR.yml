name: DEPLOYMENT 

on:
  pull_request:
    branches: ['main']


jobs:
  build:
    runs-on: [self-hosted, windows, x64]

    steps:
      - uses: actions/checkout@v2
      - uses: technote-space/get-diff-action@v6

      - name: create delta-package
        run: |
          $pathsString = git diff ${{ GITHUB_BASE_REF }} ${{GITHUB_HEAD_REF}} --name-only force-app
          Write-Host $pathsString
          $pathArray = $pathsString.Split()

          mkdir delta-package

          $pathArray | ForEach{
              Move-Item -Path $_ -Destination .\delta-package
          }

          ls delta-package